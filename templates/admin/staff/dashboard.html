{% extends "admin/base.html" %}

{% block title %}Staff Dashboard - UniCare{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <!-- Main content -->
        <main class="col-md-12 ms-sm-auto px-md-4">
            <!-- Welcome Header -->
            <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3">
                <div>
                    <h1 class="h2 mb-0">Welcome back, {{ current_user.first_name }}!</h1>
                    <p class="text-muted mb-0">Here's what's happening in your school today.</p>
                </div>
                <div class="btn-toolbar mb-2 mb-md-0">
                    <div class="btn-group me-2">
                        <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">
                            <i class="bi bi-calendar"></i> This week
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#">Today</a></li>
                            <li><a class="dropdown-item" href="#">This Week</a></li>
                            <li><a class="dropdown-item" href="#">This Month</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#">Custom Range</a></li>
                        </ul>
                    </div>
                    <button type="button" class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#quickActionModal">
                        <i class="bi bi-lightning-charge"></i> Quick Action
                    </button>
                </div>
            </div>
            
            <!-- Stats Cards -->
            <div class="row mb-4">
                <div class="col-md-3 mb-3">
                    <div class="card text-white bg-primary h-100">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="card-title text-uppercase small">Total Users</h6>
                                    <h2 class="mb-0">156</h2>
                                </div>
                                <div class="icon-circle">
                                    <i class="bi bi-people-fill"></i>
                                </div>
                            </div>
                            <p class="card-text small mt-2"><i class="bi bi-arrow-up"></i> 12 new this month</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="card text-white bg-success h-100">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="card-title text-uppercase small">Active Appointments</h6>
                                    <h2 class="mb-0">24</h2>
                                </div>
                                <div class="icon-circle">
                                    <i class="bi bi-calendar-check"></i>
                                </div>
                            </div>
                            <p class="card-text small mt-2">5 pending approval</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="card text-white bg-warning h-100">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="card-title text-uppercase small">Pending Requests</h6>
                                    <h2 class="mb-0">8</h2>
                                </div>
                                <div class="icon-circle">
                                    <i class="bi bi-exclamation-triangle"></i>
                                </div>
                            </div>
                            <p class="card-text small mt-2">Needs your review</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="card text-white bg-info h-100">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <h6 class="card-title text-uppercase small">System Status</h6>
                                    <h2 class="mb-0">All Systems Go</h2>
                                </div>
                                <div class="icon-circle">
                                    <i class="bi bi-check-circle"></i>
                                </div>
                            </div>
                            <p class="card-text small mt-2">Last updated: Just now</p>
                        </div>
                    </div>
                </div>
            </div>
                <h2 class="mb-0">Online</h2>
                <p class="card-text">All systems operational</p>
            </div>
        </div>
    </div>
</div>

<!-- Recent Activity -->
<div class="card mb-4">
    <div class="card-header">
        <h5 class="mb-0">Recent Activity</h5>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Time</th>
                        <th>User</th>
                        <th>Activity</th>
                        <th>Details</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>10:23 AM</td>
                        <td>John Doe</td>
                        <td>New registration</td>
                        <td>Client account created</td>
                    </tr>
                    <tr>
                        <td>9:45 AM</td>
                        <td>Jane Smith</td>
                        <td>Appointment booked</td>
                        <td>With Dr. Johnson at 2:00 PM</td>
                    </tr>
                    <tr>
                        <td>Yesterday</td>
                        <td>System</td>
                        <td>Backup completed</td>
                        <td>Database backup successful</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="card">
    <div class="card-header">
        <h5 class="mb-0">Quick Actions</h5>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-3 mb-3">
                <a href="{{ url_for('admin.add_user') }}" class="btn btn-outline-primary w-100">
                    <i class="bi bi-person-plus me-2"></i>Add New User
                </a>
            </div>
            <div class="col-md-3 mb-3">
                <a href="{{ url_for('admin.manage_appointments') }}" class="btn btn-outline-success w-100">
                    <i class="bi bi-calendar-plus me-2"></i>Schedule Appointment
                </a>
            </div>
            <div class="col-md-3 mb-3">
                <a href="{{ url_for('admin.reports') }}" class="btn btn-outline-info w-100">
                    <i class="bi bi-file-earmark-bar-graph me-2"></i>Generate Report
                </a>
            </div>
            <div class="col-md-3 mb-3">
                <a href="{{ url_for('admin.system_settings') }}" class="btn btn-outline-secondary w-100">
                    <i class="bi bi-gear me-2"></i>System Settings
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
// Initialize tooltips
var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
    return new bootstrap.Tooltip(tooltipTriggerEl);
});
</script>
{% endblock %}
